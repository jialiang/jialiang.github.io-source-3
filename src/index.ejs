<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Jia Liang | Software Engineer</title>
    <meta
      name="description"
      content="Personal website of Singapore software engineer, Jia Liang"
    />
    <link
      rel="icon"
      type="image/x-icon"
      href="https://jialiang.github.io/favicon.png"
    />
    <link rel="canonical" href="https://jialiang.github.io" />
    <meta name="theme-color" content="#000" />
    <meta
      name="image"
      content="https://jialiang.github.io/images/project-1-780.jpg"
    />
    <meta name="author" content="Jia Liang, hojialiang@yahoo.com" />
    <style>
      @font-face {
        font-family: "Atkinson";
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url("Atkinson-Hyperlegible-Regular-102a.woff2") format("woff2"),
          url("Atkinson-Hyperlegible-Regular-102.woff") format("woff");
      }

      @font-face {
        font-family: "Atkinson";
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url("Atkinson-Hyperlegible-Bold-102a.woff2") format("woff2"),
          url("Atkinson-Hyperlegible-Bold-102.woff") format("woff");
      }
    </style>
    <link rel="stylesheet" href="index.css" data-embed />
  </head>
  <body>
    <div class="sub-body">
      <%- include("components/about/index") %>
      <!--  -->
      <%- include("components/work/index") %>
      <!--  -->
      <%- include("components/thanks/index") %>
      <!--  -->
      <%- include("components/website/index") %>
      <!--  -->
      <%- include("components/matrix/index") %>
      <!--  -->
      <%- include("components/construction/index") %>
      <!--  -->
      <%- include("components/mainmenu/index") %>
      <!--  -->
      <%- include("components/transition/index") %>
      <!--  -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="cover"
        viewbox="0 0 1706.667 960"
        preserveAspectRatio="none"
      >
        <path
          d="M0 124.2c206.25-47.977 424.076-63.795 642.053-79.196l50.205 14.142 451.84-19.092c178.004 4.59 346.625-5.83 562.545 59.428L1706.666 0H0zM1706.68 839.735L271 917 0 807.062V960h1706.667z"
        ></path>
      </svg>

      <a class="button back to-mainmenu" href="#" title="Go back to Main menu"
        >BACK</a
      >
      <a
        class="button back to-work"
        href="#work"
        title="Go back to Work section"
        >BACK</a
      >
    </div>
    <script>
      function init() {
        var d = document;
        var raf = requestAnimationFrame;
        var qs = d.querySelector.bind(d);
        var qsa = d.querySelectorAll.bind(d);

        function loop(arr, callback) {
          [].forEach.call(arr, callback);
        }

        function addClass(elem, str) {
          if (elem.className.indexOf(str) < 0) {
            elem.className += " " + str;
          }
        }

        function removeClass(elem, str) {
          if (elem.className.indexOf(str) >= 0) {
            elem.className = elem.className.replace(str, "");
          }
        }

        function chainRaf(actions) {
          var index = 0;

          function next() {
            if (index < actions.length) {
              actions[index]();
              index += 1;
              next();
            }
          }
          next();
        }

        var skipIntro = false;

        addClass(d.body, "js");

        // Skips intro
        {
          loop(qsa("section"), function (section) {
            if (section.id && "#" + section.id === location.hash) {
              addClass(d.body, "skip-intro");
              skipIntro = true;
              section.focus();
            }
          });
        }

        // Controls switching between pages
        {
          var infinites = qsa(".leaf-container, .glow");

          var pauseInfinites = function () {
            loop(infinites, function (elem) {
              addClass(elem, "pause");
            });
          };

          var unpauseInfinites = function () {
            loop(infinites, function (elem) {
              removeClass(elem, "pause");
            });
          };

          loop(qsa("a[href^='#']"), function (a) {
            a.addEventListener("click", function (e) {
              e.preventDefault();
              var href = this.getAttribute("href");
              var applyHref = function () {
                location.hash = href;
              };

              if (href === "#") {
                chainRaf([applyHref, unpauseInfinites]);
              } else {
                chainRaf([pauseInfinites, applyHref]);
              }
            });
          });
        }

        if (skipIntro) return;

        // Controls intro animation
        {
          var introElems = [
            ".intro-0 .inner",
            ".intro-0",
            ".intro-1 .square, .intro-1 .background",
            ".leaf-container",
          ];

          var next = raf.bind(window, function (callback) {
            var elems = qsa(introElems.shift());
            loop(elems, function (elem) {
              removeClass(elem, "pause");
            });
          });

          loop(introElems, function (selector) {
            var elems = qsa(selector);
            loop(elems, function (elem) {
              addClass(elem, "pause");
            });
            elems[0].addEventListener("animationend", function (e) {
              if (e.target !== elems[0]) return;
              raf(next);
            });
          });

          next();
        }
      }

      init();
    </script>
  </body>
</html>
